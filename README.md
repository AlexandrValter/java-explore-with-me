# java-explore-with-me
### Дипломный проект по курсу Java-разработчик. Выполнил Вальтер Александр.

В основе приложения заложена идея делиться информацией об интересных событиях и помогать найти компанию для участия в них.

#### Приложение состоит из двух сервисов:
1. Основной сервис — содержит всё необходимое для работы продукта.
2. Сервис статистики — хранит количество просмотров и позволяет делать различные выборки для анализа работы приложения.

### ER-диаграмма БД:

![](https://github.com/AlexandrValter/java-explore-with-me/raw/develop/ExploreWithMe.png?raw=true)

### Реализован дополнительный функционал - Рейтинги

Возможность лайкать/дизлайкать событие. Формирование рейтинга мероприятий и рейтинга их авторов. 
Возможность сортировки событий в зависимости от рейтингов.

#### Особенности:
1. Нельзя лайкать свои события;
2. Нельзя ставить лайк два раза;
3. Свой лайк можно удалить;
4. Лайк можно ставить только событиям, на которых вы были и которые уже прошли;

#### API:

1. Добавить лайк к событию: PUT /users/{userId}/events/{eventId}/like
2. Удалить лайк с события: DELETE /users/{userId}events/{eventId}/like
3. Запросить популярных авторов: GET /users/popular
4. Запросить популярные события: GET /events/popular

#### Примерная инструкция по проверке:

1. Добавить пользователя по ручке POST "/admin/users" с телом запроса, например:

{
"name": "user_test",
"email": "user_test@user.com"
}

2. Добавить категорию по ручке POST "/admin/categories" с телом запроса, например:

{
"name": "Category for test"
}

3. Добавить событие по ручке POST "/users/{userId}/events", где {userId} - id, 
вернувшийся с ответом в пункте 1., а также с телом запроса, например:

{
"annotation": "Сплав на байдарках похож на полет.",
"category": 455,
"description": "Сплав на байдарках похож на полет. На спокойной воде — это парение. На бурной, порожистой — выполнение фигур высшего пилотажа. И то, и другое дарят чувство обновления, феерические эмоции, яркие впечатления.",
"eventDate": "2022-10-15 15:59:05",
"location": {
"lat": 55.754167,
"lon": 37.62
},
"paid": true,
"participantLimit": 10,
"requestModeration": false,
"title": "Сплав на байдарках"
}

В теле запроса в category указать id, вернувшийся с ответом в пункте 2.
4. Опубликовать событие по ручке: PATCH "/admin/events/{eventId}/publish", где {eventId} - 
id события, вернувшееся с ответом в пункте 3.
5. Добавить еще одного пользователя аналогично пункту 1.
6. Создать запрос от нового пользователя на участие в событии по ручке POST "/admin/events/{eventId}/publish", 
где {eventId} - id события, созданного в пункте 3.
7. Поменять дату на ПК так, чтобы установленная дата при создании события в поле eventDate уже прошла (иначе не 
получится поставить лайк).
8. Поставить лайк по ручке: PUT "/users/{userId}/events/{eventId}/like", где userId - id пользователя, 
который создавал запрос на участие в событии в пунтке 6, а eventId - id события, созданного в пункте 3. 
Должен вернуться json с полем likes = 1 - количество лайков к данному событию.
9. Удалить лайк события можно по ручке: DELETE "/users/{userId}events/{eventId}/like", 
где {userId} и {eventId} аналогичны пункту 8.
10. Проверить что лайк удалился можно по ручке GET "/events/{id}", где {id} - id события, к которому ставили лайк. 
После удаления лайка в поле likes число должно стать на 1 меньше по сравнению с тем что было в пункте 8.
11. Посмотреть список популярных событий можно по ручке GET "/events/popular?from=_&size=_". Вместо _ можно 
задать численное значение по умолчанию. Если сделать запрос просто по адресу "/events/popular" без указания 
from и size, то по умолчанию будут значения: from=0, size=10. Список возвращается отсортированный по количеству 
лайков по убыванию.
12. Посмотреть список популярных инициаторов событий можно по ручке GET "/users/popular?from=_&size=_". 
Вместо _ можно задать численное значение по умолчанию. Если сделать запрос просто по адресу "/users/popular" 
без указания from и size, то по умолчанию будут значения: from=0, size=10. Список возвращается отсортированный 
по количеству лайков по убыванию.
